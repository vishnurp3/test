private static final String MODEL_VALUES_SQL_TEMPLATE = """
        DECLARE
            e_object_not_exists        EXCEPTION;
            PRAGMA EXCEPTION_INIT(e_object_not_exists, -942);
        BEGIN
            EXECUTE IMMEDIATE 'DROP TABLE %1$s_MODEL_VALUES CASCADE CONSTRAINTS';
        EXCEPTION
            WHEN e_object_not_exists THEN
                NULL;
        END;
        /
        CREATE TABLE %1$s_MODEL_VALUES
        (
            SCORE_ID        NUMBER,
            VARIABLE_ID     NUMBER,
            VARIABLE_VALUE  VARCHAR2(300 BYTE)
        );
        BEGIN
            IF USER = '@env.db.admin.username@' THEN
                EXECUTE IMMEDIATE 'grant select, flashback on %1$s_MODEL_VALUES to ggextract';
            END IF;
        END;
        /
        """;
String modelCode = "SRS"; // or "CMV", "ABC", etc.
String sql = MODEL_VALUES_SQL_TEMPLATE.formatted(modelCode);
// or: String sql = String.format(MODEL_VALUES_SQL_TEMPLATE, modelCode);


private static final String MODEL_VALUES_CONSTRAINT_SQL_TEMPLATE = """
        DECLARE
            e_not_exists        EXCEPTION;
            PRAGMA EXCEPTION_INIT(e_not_exists, -2443);
        BEGIN
            EXECUTE IMMEDIATE 'ALTER TABLE %1$s_MODEL_VALUES DROP CONSTRAINT %1$sV_AK1 CASCADE';
        EXCEPTION
            WHEN e_not_exists THEN
                NULL;
        END;
        /
        ALTER TABLE %1$s_MODEL_VALUES 
            ADD CONSTRAINT %1$sV_AK1 UNIQUE (SCORE_ID, VARIABLE_ID) USING INDEX;
        """;

String buildForeignKeySql(String modelCode, String modelType) {

    // Determine dynamic referenced table + column
    String referencedTable;
    String referencedColumn;

    if (modelType.equalsIgnoreCase("CRS")) {
        referencedTable = "CRS_SCORE";
        referencedColumn = "SCORE_ID";
    } else if (modelType.equalsIgnoreCase("CTP")) {
        referencedTable = "CTP_SCORE";
        referencedColumn = "CTP_SCORE_ID";
    } else {
        throw new IllegalArgumentException("Unknown modelType: " + modelType);
    }

    // Build constraint name: <modelType>C_<modelCode>V_FK
    String constraintName = "%sC_%sV_FK".formatted(modelType, modelCode);

    // Build dynamic SQL using Java text blocks
    String sql = """
            DECLARE
                e_not_exists        EXCEPTION;
                PRAGMA EXCEPTION_INIT(e_not_exists, -2443);
            BEGIN
                EXECUTE IMMEDIATE 'ALTER TABLE %1$s_MODEL_VALUES DROP CONSTRAINT %2$s CASCADE';
            EXCEPTION
                WHEN e_not_exists THEN
                    NULL;
            END;
            /
            ALTER TABLE %1$s_MODEL_VALUES ADD CONSTRAINT %2$s
                FOREIGN KEY (SCORE_ID)
                REFERENCES %3$s(%4$s);
            """.formatted(
                modelCode,          // %1$s
                constraintName,     // %2$s
                referencedTable,    // %3$s
                referencedColumn    // %4$s
            );

    return sql;
}


String buildDropModelValuesTableSql(String modelCode) {
    return """
            DECLARE
                e_object_not_exists        EXCEPTION;
                PRAGMA EXCEPTION_INIT(e_object_not_exists, -942);
            BEGIN
                EXECUTE IMMEDIATE 'DROP TABLE %1$s_MODEL_VALUES CASCADE CONSTRAINTS';
            EXCEPTION
                WHEN e_object_not_exists THEN
                    NULL;
            END;
            /
            """.formatted(modelCode);
}
